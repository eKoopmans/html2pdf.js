/**
 * html2pdf.js v0.9.1
 * Copyright (c) 2019 Erik Koopmans
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("es6-promise/auto"),require("jspdf")):"function"==typeof define&&define.amd?define(["es6-promise/auto","jspdf"],e):t.html2pdf=e(null,t.jsPDF)}(this,function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(t,e){!function(e){function n(t,e){return function(t){p.impl.options.imagePlaceholder=void 0===t.imagePlaceholder?l.imagePlaceholder:t.imagePlaceholder,p.impl.options.cacheBust=void 0===t.cacheBust?l.cacheBust:t.cacheBust,p.impl.options.useCredentials=void 0===t.useCredentials?l.useCredentials:t.useCredentials}(e=e||{}),Promise.resolve(t).then(function(t){return function t(e,n,r){function o(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){var n,r;t.cssText?(e.cssText=t.cssText,e.font=t.font):(n=t,r=e,a.asArray(n).forEach(function(t){r.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}))}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(n){!function(n){var r=window.getComputedStyle(t,n),o=r.getPropertyValue("content");if(""!==o&&"none"!==o){var i=a.uid(),s=e.getAttribute("class");s&&e.setAttribute("class",s+" "+i);var u=document.createElement("style");u.appendChild(function(t,e,n){var r,o,i="."+t+":"+e,s=n.cssText?(o=(r=n).getPropertyValue("content"),r.cssText+" content: "+o+";"):function(t){return a.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(n);return document.createTextNode(i+"{"+s+"}")}(i,n,r)),e.appendChild(u)}}(n)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}return r||!n||n(e)?Promise.resolve(e).then(function(t){return t instanceof HTMLCanvasElement?a.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(r){return function(e,n,r){var o=e.childNodes;return 0===o.length?Promise.resolve(n):function(e,n,r){var o=Promise.resolve();return n.forEach(function(n){o=o.then(function(){return t(n,r)}).then(function(t){t&&e.appendChild(t)})}),o}(n,a.asArray(o),r).then(function(){return n})}(e,r,n)}).then(function(t){return o(e,t)}):Promise.resolve()}(t,e.filter,!0)}).then(o).then(i).then(function(t){return e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.onclone&&"function"==typeof e.onclone&&e.onclone(t),e.style&&Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]}),t}).then(function(n){return function(t,e,n){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(a.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(n,e.width||a.width(t),e.height||a.height(t))})}function r(t,e){return n(t,e).then(a.makeImage).then(a.delay(100)).then(function(n){var r="number"!=typeof e.scale?1:e.scale,o=function(t,n){var r=document.createElement("canvas");if(r.width=(e.width||a.width(t))*n,r.height=(e.height||a.height(t))*n,e.bgcolor){var o=r.getContext("2d");o.fillStyle=e.bgcolor,o.fillRect(0,0,r.width,r.height)}return r}(t,r),i=o.getContext("2d");return n&&(i.scale(r,r),i.drawImage(n,0,0)),o})}function o(t){return u.resolveAll().then(function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t})}function i(t){return c.inlineAll(t).then(function(){return t})}var a=function(){function t(t){var e=/\.([^\.\/]*?)(\?|$)/g.exec(t);return e?e[1]:""}function e(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return function(){var t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[n]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);e(new Blob([o],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");return n.body.appendChild(o),r.href=e,o.href=t,o.href},getAndEncode:function(t){return p.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise(function(e){function n(t){console.error(t),e("")}var r,o=new XMLHttpRequest;if(o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var i=new FileReader;i.onloadend=function(){var t=i.result.split(/,/)[1];e(t)},i.readAsDataURL(o.response)}else r?e(r):n("cannot fetch resource: "+t+", status: "+o.status)},o.ontimeout=function(){r?e(r):n("timeout of 30000ms occured while fetching resource: "+t)},o.responseType="blob",o.timeout=3e4,p.impl.options.useCredentials&&(o.withCredentials=!0),o.open("GET",t,!0),o.send(),p.impl.options.imagePlaceholder){var i=p.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}})},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return"data:,"===t?Promise.resolve():new Promise(function(e,n){var r=new Image;p.impl.options.useCredentials&&(r.crossOrigin="use-credentials"),r.onload=function(){e(r)},r.onerror=n,r.src=t})},width:function(t){var n=e(t,"border-left-width"),r=e(t,"border-right-width");return t.scrollWidth+n+r},height:function(t){var n=e(t,"border-top-width"),r=e(t,"border-bottom-width");return t.scrollHeight+n+r}}}(),s=function(){function t(t){return-1!==t.search(r)}function e(t){for(var e,n=[];null!==(e=r.exec(t));)n.push(e[1]);return n.filter(function(t){return!a.isDataUrl(t)})}function n(t,e,n,r){return Promise.resolve(e).then(function(t){return n?a.resolveUrl(t,n):t}).then(r||a.getAndEncode).then(function(t){return a.dataAsUrl(t,a.mimeType(e))}).then(function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+a.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")})}var r=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(r,o,i){return t(r)?Promise.resolve(r).then(e).then(function(t){var e=Promise.resolve(r);return t.forEach(function(t){e=e.then(function(e){return n(e,t,o,i)})}),e}):Promise.resolve(r)},shouldProcess:t,impl:{readUrls:e,inline:n}}}(),u=function(){function t(){function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return s.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}return Promise.resolve(a.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){if(t.hasOwnProperty("cssRules"))try{a.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return s.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)})}return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}}}(),c=function(){function t(t){return{inline:function(e){return a.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||a.getAndEncode).then(function(e){return a.dataAsUrl(e,a.mimeType(t.src))}).then(function(e){return new Promise(function(n){t.onload=n,t.onerror=n,t.src=e})})}}}return{inlineAll:function e(n){return n instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?s.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(n).then(function(){return n instanceof HTMLImageElement?t(n).inline():Promise.all(a.asArray(n.childNodes).map(function(t){return e(t)}))}):Promise.resolve(n)},impl:{newImage:t}}}(),l={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},p={toSvg:n,toPng:function(t,e){return r(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return r(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return r(t,e||{}).then(a.canvasToBlob)},toPixelData:function(t,e){return r(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,a.width(t),a.height(t)).data})},toCanvas:function(t,e){return r(t,e||{})},impl:{fontFaces:u,images:c,util:a,inliner:s,options:{}}};t.exports=p}()}),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(t){var e=void 0===t?"undefined":r(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},a=function(t,e){var n=document.createElement(t);if(e.className&&(n.className=e.className),e.innerHTML){n.innerHTML=e.innerHTML;for(var r=n.getElementsByTagName("script"),o=r.length;o-- >0;null)r[o].parentNode.removeChild(r[o])}for(var i in e.style)n.style[i]=e.style[i];return n},s=function(t,e){if("number"===i(t))return 72*t/96/e;var n={};for(var r in t)n[r]=72*t[r]/96/e;return n},u=function(t,e){return Math.floor(t*e/72*96)},c=function(){var t=document.createElement("iframe");return t.className="html2pdf-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=document.defaultView.innerWidth.toString(),t.height=document.defaultView.innerHeight.toString(),t.scrolling="no",t},l=function t(e){var n=o(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),n);return r=r.setProgress(1,t,1,[t]),r=r.set(e)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(t,e){return t.__proto__=e||l.prototype,t},l.template={prop:{src:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,domtoimage:{},jsPDF:{}}},l.prototype.from=function(t,e){return this.then(function(){switch(e=e||function(t){switch(i(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.set({src:a("div",{innerHTML:t})});case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}})},l.prototype.to=function(t){switch(t){case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toCanvas=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var t=o({},this.opt.domtoimage),e=this.prop.src,r=t.filter||function(){return!0};return t.filter=function(t){return(-1!==["HEAD","TITLE","BASE","LINK","META","SCRIPT","STYLE"].indexOf(t.tagName)||t.contains(e)||e.contains(t))&&r(t)},t.windowWidth=this.prop.pageSize.inner.px.width,t.width=t.windowWidth,n.toCanvas(e,t)}).then(function(t){this.prop.canvas=t})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t})},l.prototype.toPdf=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var t=this.prop.canvas,n=this.opt,r=t.height,o=Math.floor(t.width*this.prop.pageSize.inner.ratio),i=Math.ceil(r/o),a=this.prop.pageSize.inner.height,s=document.createElement("canvas"),u=s.getContext("2d");s.width=t.width,s.height=o,this.prop.pdf=this.prop.pdf||new e(n.jsPDF);for(var c=0;c<i;c++){c===i-1&&r%o!=0&&(s.height=r%o,a=s.height*this.prop.pageSize.inner.width/s.width);var l=s.width,p=s.height;u.fillStyle="white",u.fillRect(0,0,l,p),u.drawImage(t,0,c*o,l,p,0,0,l,p),c&&this.prop.pdf.addPage();var h=s.toDataURL("image/"+n.image.type,n.image.quality);this.prop.pdf.addImage(h,n.image.type,n.margin[1],n.margin[0],this.prop.pageSize.inner.width,a)}})},l.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},l.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(t,e)})},l.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}})},l.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.set=function(t){if("object"!==i(t))return this;var e=Object.keys(t||{}).map(function(e){var n=this;if(e in l.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return n.opt.jsPDF=t.jsPDF,n.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}},this);return this.then(function(){return this.thenList(e)})},l.prototype.get=function(t,e){return this.then(function(){var n=t in l.template.prop?this.prop[t]:this.opt[t];return e?e(n):n})},l.prototype.setMargin=function(t){return this.then(function(){switch(i(t)){case"number":t=[t,t,t,t];break;case"array":2===t.length&&(t=[t[0],t[1],t[0],t[1]])}if(4!==t.length)return this.error("Invalid margin array.");this.opt.margin=t}).then(this.setPageSize)},l.prototype.setPageSize=function(t){return this.then(function(){(t=t||e.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:u(t.inner.width,t.k),height:u(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t})},l.prototype.setProgress=function(t,e,n,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(t,e,n,r){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,r?this.progress.stack.concat(r):null)},l.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,function(e){return n.updateProgress(null,t),e}).then(t,e).then(function(t){return n.updateProgress(1),t})})},l.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then;t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:l.convert(o({},this),Promise.prototype),i=n.call(r,t,e);return l.convert(i,this.__proto__)},l.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},l.prototype.thenList=function(t){var e=this;return t.forEach(function(t){e=e.thenCore(t)}),e},l.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return l.convert(e,this)},l.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},l.prototype.error=function(t){return this.then(function(){throw new Error(t)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,e.getPageSize=function(t,e,n){if("object"===(void 0===t?"undefined":r(t))){var o=t;t=o.orientation,e=o.unit||e,n=o.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var i=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":var s=6;break;default:throw"Invalid unit: "+e}if(a.hasOwnProperty(i))var u=a[i][1]/s,c=a[i][0]/s;else try{var u=n[1],c=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t){if(t="p",c>u){l=c;c=u,u=l}}else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;if(t="l",u>c){var l=c;c=u,u=l}}return{width:c,height:u,unit:e,k:s}};var p={toCanvas:l.prototype.toCanvas};l.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},l.prototype.toCanvas=function(){return this.then(function(){var t=this.opt.domtoimage.onclone||function(){};this.opt.domtoimage.onclone=function(t,e){var n=c();document.body.appendChild(n),n.contentWindow.document.body.appendChild(e),n.contentWindow.document.body.style.margin="0";var r=this.prop.pageSize.inner.px.height,o=[].concat(this.opt.pagebreak.mode),i={avoidAll:-1!==o.indexOf("avoid-all"),css:-1!==o.indexOf("css"),legacy:-1!==o.indexOf("legacy")},s={},u=this;["before","after","avoid"].forEach(function(t){var n=i.avoidAll&&"avoid"===t;s[t]=n?[]:[].concat(u.opt.pagebreak[t]||[]),s[t].length>0&&(s[t]=Array.prototype.slice.call(e.querySelectorAll(s[t].join(", "))))});var l=e.querySelectorAll(".html2pdf__page-break");l=Array.prototype.slice.call(l);var p=e.querySelectorAll("*");Array.prototype.forEach.call(p,function(t){var e={before:!1,after:i.legacy&&-1!==l.indexOf(t),avoid:i.avoidAll};if(i.css){var n=window.getComputedStyle(t),o=["always","page","left","right"];e={before:e.before||-1!==o.indexOf(n.breakBefore||n.pageBreakBefore),after:e.after||-1!==o.indexOf(n.breakAfter||n.pageBreakAfter),avoid:e.avoid||-1!==["avoid","avoid-page"].indexOf(n.breakInside||n.pageBreakInside)}}Object.keys(e).forEach(function(n){e[n]=e[n]||-1!==s[n].indexOf(t)});var u=t.getBoundingClientRect();if(e.avoid&&!e.before){var c=Math.floor(u.top/r),p=Math.floor(u.bottom/r),h=Math.abs(u.bottom-u.top)/r;p!==c&&h<=1&&(e.before=!0)}if(e.before){var f=a("div",{style:{display:"block",height:r-u.top%r+"px"}});t.parentNode.insertBefore(f,t)}if(e.after){var d=a("div",{style:{display:"block",height:r-u.bottom%r+"px"}});t.parentNode.insertBefore(d,t.nextSibling)}}),document.body.removeChild(n),t(e)}.bind(this,t)}).then(p.toCanvas.bind(this))};var h=[],f={toCanvas:l.prototype.toCanvas,toPdf:l.prototype.toPdf};l.prototype.toCanvas=function(){return this.then(function(){var t=this.opt.domtoimage.onclone||function(){};this.opt.domtoimage.onclone=function(t,e){if(this.opt.enableLinks){var n=c();document.body.appendChild(n),n.contentWindow.document.body.appendChild(e),n.contentWindow.document.body.style.margin="0";var r=e.querySelectorAll("a"),o=s(e.getBoundingClientRect(),this.prop.pageSize.k);h=[],Array.prototype.forEach.call(r,function(t){for(var e=t.getClientRects(),n=0;n<e.length;n++){var r=s(e[n],this.prop.pageSize.k);r.left-=o.left,r.top-=o.top;var i=Math.floor(r.top/this.prop.pageSize.inner.height)+1,a=this.opt.margin[0]+r.top%this.prop.pageSize.inner.height,u=this.opt.margin[1]+r.left;h.push({page:i,top:a,left:u,clientRect:r,link:t})}},this),document.body.removeChild(n)}t(e)}.bind(this,t)}).then(f.toCanvas.bind(this))},l.prototype.toPdf=function(){return f.toPdf.call(this).then(function(){if(this.opt.enableLinks){h.forEach(function(t){this.prop.pdf.setPage(t.page),this.prop.pdf.link(t.left,t.top,t.clientRect.width,t.clientRect.height,{url:t.link.href})},this);var t=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(t)}})};var d=function t(e,n){var r=new t.Worker(n);return e?r.from(e).save():r};return d.Worker=l,d});
